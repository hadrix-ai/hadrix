import type { EvalGroupSpec } from "../../../types.js";

const NEXTJS_CASE = "cases/nextjs-baseline";
const NEXTJS_FAKEOUT_1_CASE = "cases/nextjs-fakeout-1";
const SUPABASE_CASE = "cases/supabase-baseline";
const BROKENCRYSTALS_CASE = "cases/brokencrystals-baseline";

export const FRONTEND_DIRECT_DB_WRITE_GROUPS: EvalGroupSpec[] = [
  {
    id: "FRONTEND-DIRECT-DB-WRITE-Nextjs-Baseline",
    description:
      "Frontend direct DB write baseline fixtures (Next.js) in hadrix-evals-frontend-direct-db-write",
    allowUnexpected: true,
    expectedFindings: [
      {
        filepath: `${NEXTJS_CASE}/components/ClientCreateProject.tsx`,
        expectation:
          "Frontend performs direct Supabase writes without server/edge gating; enforce RLS and move writes behind edge/API functions.",
        severity: "medium",
      },
    ],
  },
  {
    id: "FRONTEND-DIRECT-DB-WRITE-Nextjs-Fakeout1",
    description:
      "Frontend direct DB write fakeout fixtures (Next.js) in hadrix-evals-frontend-direct-db-write",
    allowUnexpected: true,
    expectedFindings: [
      {
        filepath: `${NEXTJS_FAKEOUT_1_CASE}/components/ClientCreateProject.tsx`,
        expectation:
          "Frontend performs direct Supabase writes after a client-side preflight; the write still happens in the browser without server/edge gating.",
        severity: "medium",
      },
    ],
  },
  {
    id: "FRONTEND-DIRECT-DB-WRITE-Supabase-Baseline",
    description:
      "Frontend direct DB write baseline fixtures (React Supabase) in hadrix-evals-frontend-direct-db-write",
    allowUnexpected: true,
    expectedFindings: [
      {
        filepath: `${SUPABASE_CASE}/frontend/components/CreateProjectForm.tsx`,
        expectation:
          "Frontend performs direct Supabase writes without server/edge gating; enforce RLS and move writes behind edge/API functions.",
        severity: "medium",
      },
    ],
  },
  {
    id: "FRONTEND-DB-WRITE-BrokenCrystals",
    description: "Frontend direct DB write fixtures (BrokenCrystals) in hadrix-evals-frontend-direct-db-write",
    allowUnexpected: true,
    expectedFindings: [
      {
        filepath: `${BROKENCRYSTALS_CASE}/components/ClientCreateOrder.tsx`,
        expectation: "Frontend performs direct Supabase writes without server/edge gating; enforce RLS and move writes behind edge/API functions.",
        severity: "medium",
      },
    ],
  },
];
